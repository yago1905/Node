<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <script
      src="https://cdn.socket.io/4.5.0/socket.io.min.js"
      integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <h1>TEST</h1>

    <input type="text" id="input" />
    <button id="button">SEND</button>
    <div id="msg"></div>

    <script>
      const socket = io('localhost:4000');

      const msgBlock = document.querySelector('#msg');
      const inputBlock = document.querySelector('#input');
      const buttonBlock = document.querySelector('#button');

      socket.on('connect', () => {
        console.log('connected');
      });

      socket.on('connect_error', (err) => {
        console.log(`connect_error due to ${err.message}`);
      });

      buttonBlock.addEventListener('click', () => {
        const data = {
          massage: inputBlock.value,
        };

        socket.emit('client-msg', data);
      });

      socket.on('server-msg', ({ message }) => {
        const div = document.createElement('div');
        div.innerHTML = message;
        msgBlock.insertAdjacentElement('afterbegin', div);
      });
    </script>
  </body>
</html>
